# 书店管理系统--总体分析初稿

## 关于图书信息的管理
* 我们需要创建一个文件，里面存放有关于图书的信息，包括ISBN 号、书名、作者、关键字（可以有多个）、库存量、单价。
* 使用块状链表的方式进行信息的存储和信息的查找。

## 关于账户的管理
* 采用用户作为基类，以游客，顾客，销售人员和店主的顺序，依次由前一个类进行派生类的生成。
* 我们需要创建一个文件（不同于图书信息管理的那个文件），里面存放着用户名，用户类型，以及用户名所导向的密码。（或许还有用户名下对应的操作信息，例如图书信息的购买等）。

### 不同账户的管理细则

#### 游客
* 通过创建账户进行注册，包含用户名与密码，通过登录操作进行账户的登录。

#### 顾客
* 由游客派生而来，增加查询图书与购买图书的功能。
* 对于查询图书，根据查询的指令，在图书信息管理文件中进行相对应的查找并进行交互。
* 对于购买图书，根据购买的指令，将购买记录存储至相对应的账户上，使得可以通过访问账户来获取其购买记录。
* 此外，这份购买记录也会实时影响到图书信息管理中的有关信息，例如库存量等。
* 由于有着操作日志访问的要求，因此我们需要新创建一个图书购买日志文件和总体操作日志文件，将购买记录存储至其中，便于以后根据时间顺序访问。（需要记录时间）。

#### 销售人员
* 由顾客派生而来，增加进货，图书信息录入，图书信息修改，用户创建的功能。
* 对于进货功能，我们需要创建一个图书采购日志文件和员工工作情况日志文件，将进货记录存储至其中。同时也将这份进货记录存储至总体操作日志文件中。
* 对于图书录入功能，通过录入指令，进行图书信息在图书信息管理文件中的存储。第一次录入时需要进行详尽的操作。这份录入记录会存储至员工工作情况日志文件与总体操作日志文件中。
* 对于图书信息修改功能，通过信息修改指令，在图书信息管理系统中查找并修改相关信息。这份修改记录会存储至员工工作情况日志文件与总体操作日志文件中。
* 对于用户创建功能，通过创建用户指令，销售人员可以对于本级别及以下级别的用户进行创建并指定类型。这份用户创建记录会存储至员工工作情况日志文件与总体操作日志文件中。

#### 店主
* 由销售人员派生而来，增加查询功能。
* 对于查询采购信息功能，通过查询采购信息指令，调用图书采购日志文件中符合条件（相对应时间段）的采购信息，并进行交互输出。
* 对于查询购买信息功能，通过查询购买信息指令，调用图书购买日志文件中符合条件（相对应时间段）的购买信息，并进行交互输出。
* 对于查询盈利情况功能，通过查询盈利情况指令，调用图书采购日志、图书购买日志中符合条件（相对应时间段）的价格，数量等信息，经过简单计算后进行交互输出。
* 对于查询员工工作情况功能，通过查询员工工作情况指令，调用员工工作情况日志文件中符合条件（相对应时间段）的工作信息，并进行交互输出。
* 对于查询系统日志功能，通过查询系统日志指令，调用总体操作日志文件中符合条件（相对应时间段）的工作信息，并进行交互输出。

## 关于指令的模拟

### 不同类型用户的指令模拟细则

#### 游客
* 创建账户(注册)指令：`Signup <用户名> <密码>`
* 登录账户指令：`Signin <用户名> <密码>`
* 登出账户指令：`Logout <用户名>`

#### 顾客
* 创建账户(注册)指令：`Signup <用户名> <密码>`
* 登录账户指令：`Signin <用户名> <密码>`
* 登出账户指令：`Logout <用户名>`
* 查询图书指令：`Query_BookCondition <图书信息>`
* 购买图书指令：`Purchase <图书信息>`

#### 销售人员
* 创建账户(注册)指令：`Signup <用户名> <密码>`
* 登录账户指令：`Signin <用户名> <密码>`
* 登出账户指令：`Logout <用户名>`
* 查询图书指令：`Query_BookCondition <图书信息>`
* 购买图书指令：`Purchase <图书信息>`
* 图书进货指令：`Buyin <图书信息>`
* 创建用户指令：`CreateAccount <用户类型> <用户名> <密码>`

#### 店主
* 创建账户(注册)指令：`Signup <用户名> <密码>`
* 登录账户指令：`Signin <用户名> <密码>`
* 登出账户指令：`Logout <用户名>`
* 查询图书指令：`Query_BookCondition <图书信息>`
* 购买图书指令：`Purchase <图书信息>`
* 图书进货指令：`Buyin <图书信息>`
* 创建用户指令：`CreateAccount <用户类型> <用户名> <密码>`
* 查询采购信息指令：`Query_BookStock <时间段>`
* 查询购买信息指令：`Query_BookPurchase <时间段>`
* 查询员工工作情况指令：`Query_EmployeeWorking <员工名> <时间段>`
* 查询系统日志指令：`Query_SystemRecord <时间段>` 

## 关于一些文件的存储
* 图书信息管理文件：`./DataBase/BookInfomation.txt`
* 用户信息管理文件：`./DataBase/UserInfomation.txt`
* 图书购买日志文件：`./DataBase/BookPurchaseRecord.txt`
* 图书采购日志文件：`./DataBase/BookBuyinRecord.txt`
* 员工工作情况日志文件：`./DataBase/EmployeeWorkingReport.txt`
* 系统日志文件：`./DataBase/SystemWorkingReport.txt`

## 类与结构体的设计

