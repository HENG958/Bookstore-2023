# LOST_TREE·BOOKSTROE

## 概述
本项目试图实现一个简要的书店管理系统的后端，其主要功能包括用户的登入登出，书籍的进购购买与录入，信息修改，各类工作日志的查询

## 文件结构分部陈述（目前处于构思阶段）

`main.cpp`：主程序兼入口，进行读入指令并分别调用相应指令的处理函数（或程序）

`storage.cpp(hpp)`：实现数据存储的功能，包括块状链表与`MemoryRiver`类型。

`CommandProcess.cpp(hpp)`：实现对于已经读入指令的切片处理，并进行简单的指令判断（主要是输入格式的合法性判断）。

`Commandcheck.cpp(hpp)`：实现对于指令合法性的检查（主要是字符串的检查与输入内容与权限查找相关的合法性检查）。

`account.cpp(hpp)`：申明代表账户存储信息的`Account`类与系统账户状态的`AccountStatus`类，实现以下功能  
- `su`：在账户信息文件中查找该账户，若能够找到，判断指令后续元素个数。若无元素，则查询权限是否高于当前登录账户。若有元素，则比较其输入的密码，进一步判断其登录状态，若其为未登录状态，则改变其状态为已登录状态。
- `logout`：先进行合法性检查，检查是否存在登录账户。若存在，弹出登录栈栈顶账户。
- `register`：在账户信息文件中查找是否存在同名账户。若不存在，则添加该账户信息进入文件。
- `passwd`：在账户信息文件中查找该账户，若能够找到，进行指令元素个数查询。如果指令后续元素个数为一个，则检查其是否有权限省略原先密码，若有权限，则将密码添加至该账户对应的账户信息下。如果指令后续元素个数为两个，先判断首个元素密码是否输入正确。若输入正确，删除该账户信息下原密码，添加新密码进入账户信息。
- `useradd`：首先在账户信息文件中查找是否存在同名账户。若不存在，进行进一步检查。检查是否有权限进行该账户类型的创建。若有权限，则添加该账户信息进入文件。
- `delete`：首先在账户信息文件中检查是否存在此账户。若存在，检查其登录状态。若其处于未登录状态，从文件中删除该账户信息。
- `Tellprivilege`：查找登录栈顶账户权限信息
- `Tellaccount`：查找登录栈顶账户信息
- 重载比较运算符，使得可以在对应的块状链表中实现指定位置的插入删除操作

`book.cpp(hpp)`：申明代表图书信息的`Book`类，并实现以下功能
- `show`：先判断关键词输入是否合法。若合法，根据输入的关键词，从以该关键词进行升序排序的图书信息文件中查找，并进行对应的输出。
- `select`：在图书信息文件中查找是否有该图书，若不存在，则在其中添加拥有该`[ISBN]`信息的图书。若存在，弹出当前已选中的图书，转而加入现在选中的图书。
- `buy`：先判断指令是否合法。若合法，将已选中数目信息放入图书信息文件中进行查找，更新各个分文件中书籍内存数量，计算金额并输出，同时将购买记录加入财务记录中。
- `modify`：先尝试弹出当前已选中图书，若存在则进行进一步检查。分别检查指令中参数的合法性，包括`[ISBN]`号的比对，是否存在重复与空参数情况。若均合法，则在图书信息文件中更新图书信息，并分别更新分文件中的图书信息。
- `import`：先尝试弹出当前已选中图书，若存在则进行进一步检查。分别检查购入数量与交易总额的合法性。若均合法，更新各个分文件中书籍内存数量，同时将进货记录加入财务记录中。
- `finance.cpp(hpp)`：用于记录和实现财务记录的存储与管理
- `log.cpp(hpp)`：用于系统日志操作的记录

## 信息存储文件
`account.txt`：账户信息文件

`book-ISBN.txt`：以ISBN号作为排序结构的书籍信息文件

`book-author.txt`：以作者名作为排序结构的书籍信息文件

`book-name.txt`：以书名作为排序结构的书籍信息文件

`book-keyword.txt`：以关键词作为排序结构的书籍信息文件

`finance.txt`：财务信息记录文件

`system.txt`：系统操作文件记录文件
